@start:
mov si, ax
add ax,@call_far-@start

push es
push ss
pop es
mov dx, sp
add si, @CopyMe
movsw
mov sp, dx
pop es

mov dx, ax

mov dl, 0xA3

mov ax, 0x1FFF
push ss
push ds
pop es
mov di, dx
stosw
pop ds

;push es
;pop ds

mov bx,50h
mov [bx+2],cs
mov [bx],dx

push cs
pop ss

add dx, 0x0300

mov sp,dx

dec di

xor si, si

@call_far:
call far [bx]

@CopyMe:
rep movsw
add sp, 0x0300
xor si, si
mov cx, @CopyMe
@EndCopyMe:
